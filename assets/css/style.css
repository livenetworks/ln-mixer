/* ==========================================================================
   LN DJ Mixer — v2 Dual-Deck Layout
   Single CSS file: tokens, icons, layout, components
   ========================================================================== */

/* ==========================================================================
   1. CUSTOM PROPERTIES (Design Tokens)
   ========================================================================== */

:root {
	/* Colors */
	--bg: #111;
	--panel-bg: #1a1a1a;
	--sidebar-bg: #181818;
	--topbar-bg: #1a1a1a;
	--text: #eee;
	--text-muted: #999;
	--text-dim: #666;
	--highlight: #ffa;
	--accent: #ffa500;
	--accent-active: #ff8c00;
	--accent-dim: rgba(255, 165, 0, 0.15);
	--accent-glow: rgba(255, 165, 0, 0.3);
	--deck-b-color: #44aaff;
	--deck-b-dim: rgba(68, 170, 255, 0.15);
	--deck-b-glow: rgba(68, 170, 255, 0.3);
	--track-bg: #333;
	--button-bg: #333;
	--button-hover: #444;
	--button-active: #ffa500;
	--button-border: #444;
	--border-color: #2a2a2a;
	--cue-color: #ff4444;
	--cue-dim: rgba(255, 68, 68, 0.15);
	--loop-color: #44cc88;
	--dialog-bg: #1e1e1e;
	--dialog-overlay: rgba(0, 0, 0, 0.75);
	--surface-bg: #222;
	--text-primary: #eee;
	--input-bg: #2a2a2a;
	--input-border: #444;

	/* Spacing */
	--gap-xs: 0.25rem;
	--gap-sm: 0.5rem;
	--gap-md: 1rem;
	--gap-lg: 1.5rem;
	--gap-xl: 2rem;

	/* Sizing */
	--topbar-height: 56px;
	--waveform-height: 100px;
	--touch-min: 44px;
	--radius: 6px;
	--radius-sm: 4px;

	/* Typography */
	--font-main: system-ui, -apple-system, sans-serif;
	--font-mono: 'Courier New', monospace;

	/* Transitions */
	--transition-fast: 0.15s ease;
	--transition-base: 0.25s ease;

	/* Icons (SVG data URIs) */
	--icon-play: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolygon points='5 3 19 12 5 21 5 3'/%3E%3C/svg%3E");
	--icon-pause: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='6' y='4' width='4' height='16'/%3E%3Crect x='14' y='4' width='4' height='16'/%3E%3C/svg%3E");
	--icon-stop: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Crect x='4' y='4' width='16' height='16' rx='2'/%3E%3C/svg%3E");
	--icon-mark: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z'/%3E%3C/svg%3E");
	--icon-cue: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z'/%3E%3Ccircle cx='12' cy='10' r='3'/%3E%3C/svg%3E");
	--icon-loop: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='17 1 21 5 17 9'/%3E%3Cpath d='M3 11V9a4 4 0 0 1 4-4h14'/%3E%3Cpolyline points='7 23 3 19 7 15'/%3E%3Cpath d='M21 13v2a4 4 0 0 1-4 4H3'/%3E%3C/svg%3E");
	--icon-edit: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7'/%3E%3Cpath d='M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z'/%3E%3C/svg%3E");
	--icon-search: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E");
	--icon-close: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='18' y1='6' x2='6' y2='18'/%3E%3Cline x1='6' y1='6' x2='18' y2='18'/%3E%3C/svg%3E");
	--icon-up: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='18 15 12 9 6 15'/%3E%3C/svg%3E");
	--icon-down: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'/%3E%3C/svg%3E");
	--icon-remove: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='3 6 5 6 21 6'/%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'/%3E%3C/svg%3E");
	--icon-add: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cline x1='12' y1='5' x2='12' y2='19'/%3E%3Cline x1='5' y1='12' x2='19' y2='12'/%3E%3C/svg%3E");
	--icon-music: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M9 18V5l12-2v13'/%3E%3Ccircle cx='6' cy='18' r='3'/%3E%3Ccircle cx='18' cy='16' r='3'/%3E%3C/svg%3E");
	--icon-volume: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolygon points='11 5 6 9 2 9 2 15 6 15 11 19 11 5'/%3E%3Cpath d='M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07'/%3E%3C/svg%3E");
	--icon-folder: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z'/%3E%3C/svg%3E");
	--icon-next: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolygon points='5 4 15 12 5 20 5 4'/%3E%3Cline x1='19' y1='5' x2='19' y2='19'/%3E%3C/svg%3E");
	--icon-drag: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23666'%3E%3Ccircle cx='9' cy='6' r='1.5'/%3E%3Ccircle cx='15' cy='6' r='1.5'/%3E%3Ccircle cx='9' cy='12' r='1.5'/%3E%3Ccircle cx='15' cy='12' r='1.5'/%3E%3Ccircle cx='9' cy='18' r='1.5'/%3E%3Ccircle cx='15' cy='18' r='1.5'/%3E%3C/svg%3E");
	--icon-settings: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='12' cy='12' r='3'/%3E%3Cpath d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1-2.83 2.83l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-4 0v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83-2.83l.06-.06A1.65 1.65 0 0 0 4.68 15a1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1 0-4h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 2.83-2.83l.06.06A1.65 1.65 0 0 0 9 4.68a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 4 0v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 2.83l-.06.06A1.65 1.65 0 0 0 19.4 9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 0 4h-.09a1.65 1.65 0 0 0-1.51 1z'/%3E%3C/svg%3E");
	--icon-upload: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4'/%3E%3Cpolyline points='17 8 12 3 7 8'/%3E%3Cline x1='12' y1='3' x2='12' y2='15'/%3E%3C/svg%3E");
	--icon-check: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%2322c55e' stroke-width='2.5' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='20 6 9 17 4 12'/%3E%3C/svg%3E");
	--icon-zoom-in: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3Cline x1='11' y1='8' x2='11' y2='14'/%3E%3Cline x1='8' y1='11' x2='14' y2='11'/%3E%3C/svg%3E");
	--icon-zoom-out: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23eee' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3Cline x1='8' y1='11' x2='14' y2='11'/%3E%3C/svg%3E");
}

/* ==========================================================================
   2. ICON SYSTEM
   ========================================================================== */

[class*="ln-icon-"]::before {
	content: '';
	display: inline-block;
	width: 1.25rem;
	height: 1.25rem;
	flex-shrink: 0;
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center;
}

.ln-icon-play::before    { background-image: var(--icon-play); }
.ln-icon-pause::before   { background-image: var(--icon-pause); }
.ln-icon-stop::before    { background-image: var(--icon-stop); }
.ln-icon-mark::before    { background-image: var(--icon-mark); }
.ln-icon-cue::before     { background-image: var(--icon-cue); }
.ln-icon-loop::before    { background-image: var(--icon-loop); }
.ln-icon-edit::before    { background-image: var(--icon-edit); }
.ln-icon-search::before  { background-image: var(--icon-search); }
.ln-icon-close::before   { background-image: var(--icon-close); }
.ln-icon-up::before      { background-image: var(--icon-up); }
.ln-icon-down::before    { background-image: var(--icon-down); }
.ln-icon-remove::before  { background-image: var(--icon-remove); }
.ln-icon-add::before     { background-image: var(--icon-add); }
.ln-icon-music::before   { background-image: var(--icon-music); }
.ln-icon-volume::before  { background-image: var(--icon-volume); }
.ln-icon-folder::before  { background-image: var(--icon-folder); }
.ln-icon-next::before    { background-image: var(--icon-next); }
.ln-icon-drag::before     { background-image: var(--icon-drag); }
.ln-icon-settings::before { background-image: var(--icon-settings); }
.ln-icon-upload::before   { background-image: var(--icon-upload); }
.ln-icon-check::before    { background-image: var(--icon-check); }
.ln-icon-zoom-in::before  { background-image: var(--icon-zoom-in); }
.ln-icon-zoom-out::before { background-image: var(--icon-zoom-out); }

.ln-icon--sm::before { width: 1rem; height: 1rem; }
.ln-icon--lg::before { width: 1.5rem; height: 1.5rem; }

/* ==========================================================================
   3. RESET & BASE
   ========================================================================== */

* {
	box-sizing: border-box;
}

body {
	margin: 0;
	background: var(--bg);
	color: var(--text);
	font-family: var(--font-main);
	font-size: 14px;
	line-height: 1.4;
	overflow: hidden;
}

h1, h2, h3, h4, h5, h6 {
	margin: 0;
	font-weight: 600;
}

ul, ol {
	list-style: none;
	padding: 0;
	margin: 0;
}

p {
	margin: 0;
}

fieldset {
	border: none;
	margin: 0;
	padding: 0;
}

/* ==========================================================================
   4. LAYOUT
   ========================================================================== */

.player {
	display: grid;
	grid-template-rows: var(--topbar-height) 1fr;
	height: 100vh;
	overflow: hidden;
	position: relative;
}

/* --- Global Download Progress Bar --- */

.global-progress {
	position: absolute;
	top: var(--topbar-height);
	left: 0;
	right: 0;
	height: 4px;
	z-index: 10;
	background: var(--track-bg);
	overflow: hidden;
	margin: 0;
	pointer-events: none;
}

.global-progress > [data-ln-progress] {
	display: block;
	height: 100%;
	width: 0;
	background: var(--accent);
	border-radius: 0;
	transition: width 0.15s ease;
}

/* --- Topbar --- */

.topbar {
	display: flex;
	align-items: center;
	gap: var(--gap-lg);
	padding: 0 var(--gap-md);
	background: var(--topbar-bg);
	border-bottom: 1px solid var(--border-color);
}

.topbar-left {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
}

/* --- Profile Bar --- */

.profile-bar {
	display: flex;
	align-items: center;
	gap: var(--gap-xs);
	overflow-x: auto;
	flex-shrink: 1;
	min-width: 0;
	-webkit-overflow-scrolling: touch;
	scrollbar-width: none;
}

.profile-bar::-webkit-scrollbar {
	display: none;
}

.profile-btn {
	padding: 0.3rem 0.75rem;
	font-size: 0.7rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	border-radius: 99px;
	background: transparent;
	border: 1px solid var(--button-border);
	color: var(--text-muted);
	white-space: nowrap;
	transition: background var(--transition-fast), color var(--transition-fast), border-color var(--transition-fast);
}

.profile-btn:hover {
	background: rgba(255, 255, 255, 0.06);
	color: var(--text);
}

.profile-btn.active {
	background: var(--accent);
	color: #000;
	border-color: var(--accent);
	font-weight: 700;
}

.profile-add {
	padding: 0.25rem;
	background: transparent;
	border: 1px dashed var(--button-border);
	border-radius: 50%;
	color: var(--text-dim);
	min-width: 28px;
	min-height: 28px;
	display: inline-flex;
	align-items: center;
	justify-content: center;
	flex-shrink: 0;
}

.profile-add:hover {
	border-color: var(--accent);
	color: var(--accent);
}

.volume-control {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
	margin-left: auto;
}

.volume-control input[type="range"] {
	-webkit-appearance: none;
	width: 120px;
	height: 4px;
	background: var(--track-bg);
	border-radius: 2px;
	outline: none;
	cursor: pointer;
}

.volume-control input[type="range"]::-webkit-slider-thumb {
	-webkit-appearance: none;
	width: 16px;
	height: 16px;
	border-radius: 50%;
	background: var(--accent);
	cursor: pointer;
}

.topbar-actions {
	display: flex;
	gap: var(--gap-sm);
}

/* --- Main Area --- */

.main-area {
	display: grid;
	grid-template-columns: 1fr 30%;
	overflow: hidden;
}

/* --- Empty State --- */

.empty-state {
	grid-column: 1 / -1;
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	gap: var(--gap-md);
	padding: var(--gap-xl);
	text-align: center;
	color: var(--text-muted);
}

.empty-state-icon {
	width: 64px;
	height: 64px;
	border-radius: 50%;
	background: var(--surface-bg);
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0;
}

.empty-state-icon .ln-icon-add::before {
	width: 32px;
	height: 32px;
	opacity: 0.5;
}

.empty-state h2 {
	font-size: 1.25rem;
	color: var(--text-primary);
	margin: 0;
}

.empty-state p {
	font-size: 0.9rem;
	margin: 0;
}

.empty-state-btn {
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	padding: 0.75rem 1.5rem;
	background: var(--accent);
	color: var(--bg);
	border: none;
	border-radius: var(--radius);
	font-size: 0.95rem;
	font-weight: 600;
	cursor: pointer;
	touch-action: manipulation;
	min-height: 48px;
}

.empty-state-btn:hover {
	filter: brightness(1.1);
}

.empty-state-btn .ln-icon-add::before {
	filter: brightness(0);
}

/* ==========================================================================
   5. DECKS PANEL (left)
   ========================================================================== */

.decks-panel {
	display: flex;
	flex-direction: column;
	gap: 2px;
	overflow-y: auto;
	background: var(--border-color);
}

/* --- Individual Deck --- */

.deck {
	--deck-color: var(--accent);
	display: flex;
	flex-direction: column;
	gap: var(--gap-sm);
	padding: var(--gap-md) var(--gap-lg);
	background: var(--panel-bg);
	flex: 1;
	min-height: 0;
}

.deck--b {
	--deck-color: var(--deck-b-color);
}

.deck-header {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
}

.deck-header h2 {
	font-size: 0.75rem;
	text-transform: uppercase;
	letter-spacing: 0.1em;
	color: var(--text-muted);
}

.deck-badge {
	font-size: 0.6rem;
	text-transform: uppercase;
	letter-spacing: 0.08em;
	padding: 0.15rem 0.5rem;
	border-radius: 2px;
	background: var(--accent-dim);
	color: var(--accent);
	font-weight: 700;
}

.deck-badge--b {
	background: var(--deck-b-dim);
	color: var(--deck-b-color);
}

/* --- Track Info in Deck --- */

.deck .track-title {
	font-size: 1.2rem;
	font-weight: 700;
	color: var(--highlight);
}

.deck--b .track-title {
	color: var(--text);
}

.deck .track-artist {
	font-size: 0.875rem;
	color: var(--text-muted);
	margin-top: -0.25rem;
}

/* --- Waveform --- */

.waveform {
	position: relative;
	height: var(--waveform-height);
	margin-bottom: 20px;
	background:
		repeating-linear-gradient(
			90deg,
			transparent, transparent 2px,
			rgba(255,255,255,0.03) 2px, rgba(255,255,255,0.03) 4px
		),
		linear-gradient(
			90deg,
			#2a2a3a 0%, #3a3a5a 8%, #4a4a6a 15%, #3a3a5a 22%,
			#5a5a7a 30%, #4a4a6a 38%, #3a3a5a 45%, #5a5a7a 52%,
			#6a6a8a 58%, #4a4a6a 65%, #3a3a5a 72%, #5a5a7a 80%,
			#4a4a6a 88%, #3a3a5a 95%, #2a2a3a 100%
		);
	border-radius: var(--radius);
	overflow: hidden;
	margin: 0;
	cursor: pointer;
}

.waveform--loaded {
	background: none;
	overflow: visible;
}

.waveform-progress {
	position: absolute;
	inset: 0;
	z-index: 2;
	background: rgba(255, 165, 0, 0.08);
	pointer-events: none;
	transition: width 0.1s linear;
}

.deck--b .waveform-progress {
	background: rgba(68, 170, 255, 0.06);
}

.waveform-playhead {
	position: absolute;
	top: 0;
	bottom: 0;
	z-index: 2;
	width: 2px;
	background: #fff;
	box-shadow: 0 0 6px rgba(255, 255, 255, 0.5);
	pointer-events: none;
	transition: left 0.1s linear;
}

.cue-marker {
	position: absolute;
	top: 0;
	bottom: 0;
	z-index: 2;
	width: 2px;
	pointer-events: none;
}

.cue-marker--start { background: var(--cue-color); }
.cue-marker--end { background: var(--cue-color); opacity: 0.6; }

.cue-region {
	position: absolute;
	top: 0;
	bottom: 0;
	z-index: 2;
	background: var(--cue-dim);
	pointer-events: none;
}

.cue-marker--pending {
	background: var(--cue-color);
	opacity: 0.8;
	animation: cue-pulse 1s ease-in-out infinite;
}

@keyframes cue-pulse {
	0%, 100% { opacity: 0.8; }
	50% { opacity: 0.3; }
}

/* --- Waveform Container + Zoom --- */

.waveform-container {
	position: relative;
	border: 0;
	padding: 0;
	margin: 0;
	overflow: visible;
	min-width: 0;
}

.waveform--zoomed {
	overflow-x: auto;
	overflow-y: visible;
	-webkit-overflow-scrolling: touch;
}

.waveform--zoomed::-webkit-scrollbar {
	height: 4px;
}

.waveform--zoomed::-webkit-scrollbar-track {
	background: transparent;
}

.waveform--zoomed::-webkit-scrollbar-thumb {
	background: rgba(255, 255, 255, 0.2);
	border-radius: 2px;
}

.waveform-zoom {
	position: absolute;
	top: var(--gap-xs);
	right: var(--gap-xs);
	z-index: 5;
	display: flex;
	gap: 2px;
	opacity: 0.4;
	transition: opacity var(--transition-fast);
}

.waveform-container:hover .waveform-zoom,
.waveform-zoom:focus-within {
	opacity: 1;
}

.waveform-zoom button {
	min-width: 28px;
	min-height: 28px;
	padding: 2px;
	background: rgba(0, 0, 0, 0.6);
	border-radius: var(--radius);
	touch-action: manipulation;
}

/* --- Waveform Timeline Ruler --- */

.waveform-timeline {
	position: absolute;
	bottom: 0;
	left: 0;
	width: 100%;
	height: 20px;
	pointer-events: none;
	z-index: 3;
}

.waveform-tick {
	position: absolute;
	bottom: 0;
	width: 1px;
	background: rgba(255, 255, 255, 0.15);
}

.waveform-tick--minor {
	height: 5px;
}

.waveform-tick--major {
	height: 10px;
	background: rgba(255, 255, 255, 0.3);
}

.waveform-tick--major::after {
	content: attr(data-time);
	position: absolute;
	top: 0;
	left: 2px;
	font-size: 0.65rem;
	color: var(--text-dim);
	white-space: nowrap;
}

/* --- Time Display --- */

.time-display {
	display: flex;
	align-items: center;
	gap: var(--gap-xs);
	font-family: var(--font-mono);
	font-size: 1.25rem;
	color: var(--text);
	font-variant-numeric: tabular-nums;
}

.time-display .time-separator {
	color: var(--text-dim);
	font-size: 1rem;
}

.time-display .time-total {
	color: var(--text-muted);
	font-size: 1rem;
}

/* --- Transport Controls --- */

.controls {
	display: flex;
	gap: var(--gap-sm);
	flex-wrap: wrap;
}

/* ==========================================================================
   6. SIDEBAR (right panel)
   ========================================================================== */

.sidebar {
	background: var(--sidebar-bg);
	border-left: 1px solid var(--border-color);
	display: flex;
	flex-direction: column;
	overflow-y: auto;
}

/* --- Playlist Accordion --- */

.playlist-group {
	border-bottom: 1px solid var(--border-color);
}

.playlist-group > header {
	display: flex;
	align-items: center;
	padding: var(--gap-sm) var(--gap-md);
	font-size: 0.8rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.06em;
	color: var(--text-muted);
	cursor: pointer;
	user-select: none;
	touch-action: manipulation;
	min-height: var(--touch-min);
	transition: background var(--transition-fast), color var(--transition-fast);
}

.playlist-group > header:hover {
	background: rgba(255, 255, 255, 0.04);
}

.playlist-group.open > header {
	color: var(--accent);
	background: var(--accent-dim);
}

.playlist-group > header::before {
	content: '';
	display: inline-block;
	width: 0.75rem;
	height: 0.75rem;
	margin-right: var(--gap-sm);
	background-image: var(--icon-down);
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center;
	transition: transform var(--transition-fast);
	flex-shrink: 0;
}

.playlist-group:not(.open) > header::before {
	transform: rotate(-90deg);
}

.playlist-group > .track-list {
	display: none;
}

.playlist-group.open > .track-list {
	display: block;
}

/* --- Sidebar Footer --- */

.sidebar-footer {
	margin-top: auto;
	padding: var(--gap-sm) var(--gap-md);
	border-top: 1px solid var(--border-color);
}

/* --- Track List --- */

.track-list {
	overflow-y: auto;
}

.track-list > li {
	position: relative;
	overflow: hidden;
	border-bottom: 1px solid var(--border-color);
	transition: background var(--transition-fast);
}

.track-content {
	position: relative;
	z-index: 1;
	display: grid;
	grid-template-columns: 1.5rem 1fr auto;
	grid-template-rows: auto auto;
	column-gap: var(--gap-sm);
	row-gap: 2px;
	padding: var(--gap-sm) var(--gap-md);
	background: var(--sidebar-bg);
	align-items: center;
}

/* Row 1: number+drag | title + artist + duration | [A][B]
   Row 2:             | notes + indicators        |       */

/* --- Track Number + Drag Handle (combined) --- */

.track-number {
	grid-column: 1;
	grid-row: 1 / -1;
	display: flex;
	flex-direction: column;
	align-items: center;
	gap: 2px;
	font-size: 0.8rem;
	color: var(--text-dim);
	text-align: center;
	cursor: grab;
	touch-action: none;
	padding: 2px 0;
}

.track-number::after {
	content: '';
	display: block;
	width: 0.75rem;
	height: 0.75rem;
	background-image: var(--icon-drag);
	background-size: contain;
	background-repeat: no-repeat;
	background-position: center;
	opacity: 0.4;
	transition: opacity var(--transition-fast);
}

.track-list > li:hover .track-number::after {
	opacity: 0.8;
}

.track-number:active {
	cursor: grabbing;
}

/* Dragging state (ln-sortable component) */
.track-list > li.ln-sortable--dragging {
	opacity: 0.4;
}

.track-list > li.ln-sortable--dragging > .track-content {
	background: var(--panel-bg);
}

/* Drop indicator line (ln-sortable component) */
.track-list > li.ln-sortable--drop-before {
	box-shadow: inset 0 2px 0 0 var(--accent);
}

.track-list > li.ln-sortable--drop-after {
	box-shadow: inset 0 -2px 0 0 var(--accent);
}

.track-info {
	grid-column: 2;
	grid-row: 1;
	display: flex;
	align-items: baseline;
	gap: var(--gap-sm);
	min-width: 0;
}

.track-name {
	font-size: 0.875rem;
	font-weight: 600;
	color: var(--text);
}

.track-info .track-artist {
	font-size: 0.75rem;
	color: var(--text-muted);
	white-space: nowrap;
}

.track-duration {
	font-size: 0.75rem;
	color: var(--text-dim);
	font-family: var(--font-mono);
	margin-left: auto;
	white-space: nowrap;
}

.track-meta-row {
	grid-column: 2;
	grid-row: 2;
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
	min-width: 0;
}

.track-notes {
	font-size: 0.7rem;
	color: var(--text-dim);
	font-style: italic;
}

/* --- Edit Track Dialog --- */

.edit-track-title {
	font-size: 1rem;
	font-weight: 600;
	color: var(--text);
}

.edit-track-artist {
	font-size: 0.85rem;
	color: var(--text-muted);
	margin-bottom: var(--gap-md);
}

.track-indicators {
	display: flex;
	align-items: center;
	gap: var(--gap-xs);
	flex-shrink: 0;
}

.indicator-loop {
	color: var(--loop-color);
}

.indicator-loop::before {
	width: 0.875rem;
	height: 0.875rem;
	filter: hue-rotate(100deg) brightness(1.5);
}

.loop-count-badge {
	font-size: 0.6rem;
	color: var(--loop-color);
	font-family: var(--font-mono);
	background: rgba(68, 204, 136, 0.1);
	padding: 0.1rem 0.3rem;
	border-radius: 2px;
}

/* Active on Deck A */
.track-list > li.active-a > .track-content {
	background: var(--accent-dim);
	border-left: 3px solid var(--accent);
}

.track-list > li.active-a .track-name {
	color: var(--accent);
}

.track-list .active-a .track-number {
	color: var(--accent);
	font-weight: 700;
}

/* Active on Deck B */
.track-list > li.active-b > .track-content {
	background: var(--deck-b-dim);
	border-left: 3px solid var(--deck-b-color);
}

.track-list > li.active-b .track-name {
	color: var(--deck-b-color);
}

.track-list .active-b .track-number {
	color: var(--deck-b-color);
	font-weight: 700;
}

/* Both decks on same track */
.track-list > li.active-a.active-b > .track-content {
	background: linear-gradient(90deg, var(--accent-dim), var(--deck-b-dim));
	border-left: 3px solid var(--accent);
}

/* --- Load-to-Deck Buttons in Sidebar --- */

.track-load-actions {
	grid-column: 3;
	grid-row: 1 / -1;
	display: flex;
	gap: var(--gap-sm);
	align-self: center;
}

.load-btn {
	min-width: 48px;
	min-height: 48px;
	padding: 0;
	font-size: 1rem;
	font-weight: 800;
	border-radius: var(--radius);
	display: inline-flex;
	align-items: center;
	justify-content: center;
	transition: background var(--transition-fast), transform 0.1s ease;
}

.load-btn:active {
	transform: scale(0.92);
}

.load-btn--a {
	background: rgba(255, 165, 0, 0.15);
	border: 2px solid var(--accent);
	color: var(--accent);
}

.load-btn--a:hover {
	background: rgba(255, 165, 0, 0.3);
}

.load-btn--a.load-btn--loaded {
	background: var(--accent);
	color: #000;
	cursor: default;
	pointer-events: none;
}

.load-btn--b {
	background: rgba(68, 170, 255, 0.15);
	border: 2px solid var(--deck-b-color);
	color: var(--deck-b-color);
}

.load-btn--b:hover {
	background: rgba(68, 170, 255, 0.3);
}

.load-btn--b.load-btn--loaded {
	background: var(--deck-b-color);
	color: #000;
	cursor: default;
	pointer-events: none;
}

/* ==========================================================================
   7. BUTTONS
   ========================================================================== */

button {
	background: var(--button-bg);
	border: 1px solid var(--button-border);
	color: var(--text);
	padding: 0.5rem 1rem;
	cursor: pointer;
	font-size: 0.875rem;
	font-family: var(--font-main);
	border-radius: var(--radius-sm);
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	transition: background var(--transition-fast), border-color var(--transition-fast);
	touch-action: manipulation;
	white-space: nowrap;
}

button:hover {
	background: var(--button-hover);
}

button.active {
	background: var(--button-active);
	color: #000;
	border-color: var(--accent-active);
}

button.active [class*="ln-icon-"]::before {
	filter: brightness(0);
}

/* Deck B active buttons use blue */
.deck--b button.active {
	background: var(--deck-b-color);
	border-color: var(--deck-b-color);
}

button.btn--sm {
	padding: 0.3rem 0.6rem;
	font-size: 0.75rem;
}

button.btn--ghost {
	background: transparent;
	border-color: transparent;
}

button.btn--ghost:hover {
	background: rgba(255, 255, 255, 0.08);
}

button.btn--danger:hover {
	background: rgba(255, 68, 68, 0.2);
	border-color: var(--cue-color);
}

/* --- LED Button (Loop toggle) --- */

.btn--led {
	position: relative;
	padding-left: 1.6rem;
}

.led-indicator {
	position: absolute;
	left: 0.5rem;
	top: 50%;
	transform: translateY(-50%);
	width: 8px;
	height: 8px;
	border-radius: 50%;
	background: var(--text-dim);
	border: 1px solid rgba(255, 255, 255, 0.1);
	transition: background var(--transition-fast), box-shadow var(--transition-fast);
}

button.active .led-indicator {
	background: var(--loop-color);
	box-shadow: 0 0 8px var(--loop-color), 0 0 16px rgba(68, 204, 136, 0.3);
}

.deck--b button.active .led-indicator {
	background: var(--deck-b-color);
	box-shadow: 0 0 8px var(--deck-b-color), 0 0 16px rgba(68, 170, 255, 0.3);
}

/* --- Loop Segment Buttons Strip --- */

.loop-segments {
	display: flex;
	flex-wrap: wrap;
	gap: var(--gap-xs);
}

.loop-segments:empty {
	display: none;
}

.loop-seg-btn {
	display: inline-flex;
	align-items: stretch;
	gap: 0;
	padding: 0;
	font-size: 0.75rem;
	font-weight: 600;
	text-transform: uppercase;
	letter-spacing: 0.04em;
	border-radius: var(--radius);
	background: transparent;
	border: 1px solid var(--loop-color);
	color: var(--loop-color);
	cursor: pointer;
	touch-action: manipulation;
	min-height: 44px;
	position: relative;
	overflow: hidden;
	transition: background var(--transition-fast), color var(--transition-fast);
}

.loop-seg-label {
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	padding: 0.4rem 0.75rem;
	padding-left: 1.4rem;
}

.loop-seg-btn .led-indicator {
	left: 0.45rem;
}

.loop-seg-btn:hover {
	background: rgba(68, 204, 136, 0.15);
}

.loop-seg-btn.active {
	background: rgba(68, 204, 136, 0.2);
	border-color: var(--loop-color);
	color: var(--loop-color);
}

.loop-seg-btn.active .led-indicator {
	background: var(--loop-color);
	box-shadow: 0 0 8px var(--loop-color), 0 0 16px rgba(68, 204, 136, 0.3);
}

.deck--b .loop-seg-btn {
	border-color: var(--deck-b-color);
	color: var(--deck-b-color);
}

.deck--b .loop-seg-btn:hover {
	background: rgba(68, 170, 255, 0.15);
}

.deck--b .loop-seg-btn.active {
	background: rgba(68, 170, 255, 0.2);
	border-color: var(--deck-b-color);
	color: var(--deck-b-color);
}

.deck--b .loop-seg-btn.active .led-indicator {
	background: var(--deck-b-color);
	box-shadow: 0 0 8px var(--deck-b-color), 0 0 16px rgba(68, 170, 255, 0.3);
}

.loop-seg-remove {
	display: inline-flex;
	align-items: center;
	justify-content: center;
	padding: 0;
	background: rgba(255, 68, 68, 0.15);
	border: none;
	border-left: 1px solid rgba(255, 68, 68, 0.3);
	min-width: 40px;
	min-height: auto;
	cursor: pointer;
	transition: background var(--transition-fast);
}

.loop-seg-remove .ln-icon-close::before {
	width: 0.9rem;
	height: 0.9rem;
	filter: brightness(0) saturate(100%) invert(40%) sepia(80%) saturate(2000%) hue-rotate(335deg);
}

.loop-seg-remove:hover {
	background: rgba(255, 68, 68, 0.35);
}

/* ==========================================================================
   8. MODALS (ln-modal)
   ========================================================================== */

.ln-modal {
	display: none;
	position: fixed;
	inset: 0;
	background: var(--dialog-overlay);
	backdrop-filter: blur(4px);
	-webkit-backdrop-filter: blur(4px);
	z-index: 1000;
	align-items: center;
	justify-content: center;
	opacity: 0;
	transition: opacity var(--transition-fast);
}

.ln-modal--open {
	display: flex;
	opacity: 1;
}

.ln-modal__content {
	background: var(--dialog-bg);
	color: var(--text);
	border: 1px solid #444;
	border-radius: var(--radius);
	max-width: 700px;
	width: 90vw;
	max-height: 85vh;
	overflow: hidden;
	animation: ln-modal-slideIn 0.2s ease;
	display: grid;
	grid-template-rows: auto 1fr auto;
}

@keyframes ln-modal-slideIn {
	from { transform: translateY(-30px); opacity: 0; }
	to { transform: translateY(0); opacity: 1; }
}

body.ln-modal-open {
	overflow: hidden;
}

.ln-modal header {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: var(--gap-md) var(--gap-lg);
	border-bottom: 1px solid var(--border-color);
}

.ln-modal header h2 {
	font-size: 1.1rem;
	color: var(--text);
}

.ln-modal main {
	padding: var(--gap-md) var(--gap-lg);
	overflow-y: auto;
	max-height: 60vh;
}

#modal-track-library main {
	height: 60vh;
}

.ln-modal footer {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: var(--gap-md) var(--gap-lg);
	border-top: 1px solid var(--border-color);
}

.ln-modal__content--sm {
	max-width: 400px;
}

/* --- Loop Range Display --- */

.loop-range-display {
	display: block;
	font-family: var(--font-mono);
	font-size: 1.1rem;
	color: var(--loop-color);
	margin-bottom: var(--gap-md);
}

/* --- New Playlist Dialog --- */

.form-field {
	display: flex;
	flex-direction: column;
	gap: var(--gap-sm);
}

.form-field label {
	font-size: 0.85rem;
	color: var(--text-muted);
	font-weight: 600;
}

.form-field input[type="text"] {
	background: var(--input-bg);
	border: 1px solid var(--input-border);
	border-radius: var(--radius-sm);
	color: var(--text);
	padding: 0.5rem 0.75rem;
	font-size: 0.9rem;
	font-family: var(--font-main);
}

.form-field input[type="text"]::placeholder {
	color: var(--text-dim);
}

/* --- Library Dialog --- */

.library-search {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
	margin-bottom: var(--gap-md);
}

.library-search input[type="search"] {
	flex: 1;
	background: var(--input-bg);
	border: 1px solid var(--input-border);
	border-radius: var(--radius-sm);
	color: var(--text);
	padding: 0.5rem 0.75rem;
	font-size: 0.875rem;
	font-family: var(--font-main);
}

.library-search input[type="search"]::placeholder {
	color: var(--text-dim);
}

[data-ln-search-hide] {
	display: none !important;
}

.library-list > li {
	display: grid;
	grid-template-columns: 1fr auto auto;
	grid-template-rows: auto 4px;
	align-items: center;
	gap: 0 var(--gap-md);
	padding: var(--gap-sm) var(--gap-sm) 0;
	border-bottom: 1px solid var(--border-color);
}

.library-list > li .library-download-progress {
	grid-column: 1 / -1;
	grid-row: 2;
}

.library-list > li .library-uncache-btn {
	grid-column: 2;
	grid-row: 1;
}

.library-list > li [data-ln-action="add-to-playlist"] {
	grid-column: 3;
	grid-row: 1;
}

.library-list > li:last-child {
	border-bottom: none;
}

.library-track-info {
	flex: 1;
}

.library-track-info .track-name {
	font-weight: 600;
	font-size: 0.875rem;
}

.library-track-info .track-artist {
	font-size: 0.75rem;
	color: var(--text-muted);
}

/* --- Library: Download progress bar (always visible) --- */

.library-download-progress {
	height: 4px;
	width: 100%;
	border-radius: 0;
	background: var(--track-bg);
	overflow: hidden;
	margin: 0;
}

.library-download-progress > [data-ln-progress] {
	display: block;
	height: 100%;
	width: 0;
	background: var(--accent);
	border-radius: 0;
	transition: width 0.15s ease;
}

/* Cached state: green bar at 100% */
.library-list > li[data-ln-cached] .library-download-progress > [data-ln-progress] {
	background: #22c55e;
}

/* Uncache button — positioned at end of row 1, only when cached */
.library-uncache-btn {
	display: none;
	background: transparent;
	border: none;
	padding: 0.25rem;
	border-radius: var(--radius-sm);
	cursor: pointer;
	touch-action: manipulation;
	min-width: auto;
	min-height: auto;
}

.library-uncache-btn:hover,
.library-uncache-btn:active {
	background: rgba(255, 68, 68, 0.2);
}

.library-uncache-btn .ln-icon-remove::before {
	width: 0.85rem;
	height: 0.85rem;
}

.library-list > li[data-ln-cached] .library-uncache-btn {
	display: inline-flex;
}

/* Downloading state: hide Add button */
.library-list > li[data-ln-downloading] [data-ln-action="add-to-playlist"] {
	display: none;
}

/* --- Library: No API empty state --- */

.library-no-api {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	padding: var(--gap-xl) var(--gap-lg);
	text-align: center;
	color: var(--text-muted);
	gap: var(--gap-sm);
}

.library-no-api-icon {
	width: 64px;
	height: 64px;
	border-radius: 50%;
	background: var(--surface-bg);
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0;
}

.library-no-api-icon .ln-icon-settings::before {
	width: 32px;
	height: 32px;
	opacity: 0.5;
}

.library-no-api h3 {
	font-size: 1.125rem;
	color: var(--text-primary);
	margin: 0;
}

.library-no-api p {
	font-size: 0.875rem;
	margin: 0;
}

.library-no-api-btn {
	display: inline-flex;
	align-items: center;
	gap: 0.4rem;
	padding: 0.75rem 1.5rem;
	background: var(--accent);
	color: var(--bg);
	border: none;
	border-radius: var(--radius);
	font-size: 0.95rem;
	font-weight: 600;
	cursor: pointer;
	touch-action: manipulation;
	min-height: 48px;
}

.library-no-api-btn:hover {
	filter: brightness(1.1);
}

.library-no-api-btn .ln-icon-settings::before {
	filter: brightness(0);
}

/* --- Settings Dialog --- */

.settings-form {
	display: flex;
	flex-direction: column;
	gap: var(--gap-lg);
}

.settings-form .form-field input[type="url"],
.settings-form .form-field input[type="text"] {
	background: var(--input-bg);
	border: 1px solid var(--input-border);
	border-radius: var(--radius-sm);
	color: var(--text);
	padding: 0.5rem 0.75rem;
	font-size: 0.9rem;
	font-family: var(--font-main);
	width: 100%;
}

.settings-form .form-field input::placeholder {
	color: var(--text-dim);
}

.settings-form .form-field .field-hint {
	font-size: 0.7rem;
	color: var(--text-dim);
	font-style: italic;
}

.logo-preview {
	display: flex;
	align-items: center;
	gap: var(--gap-md);
}

.logo-preview img {
	max-width: 64px;
	max-height: 64px;
	border-radius: var(--radius-sm);
	background: var(--input-bg);
	object-fit: contain;
}

.logo-preview .logo-placeholder {
	width: 64px;
	height: 64px;
	border-radius: var(--radius-sm);
	background: var(--input-bg);
	border: 1px dashed var(--input-border);
	display: flex;
	align-items: center;
	justify-content: center;
	color: var(--text-dim);
	font-size: 0.7rem;
}

/* --- Settings: Audio cache info --- */

.cache-info {
	display: flex;
	align-items: center;
	justify-content: space-between;
	gap: var(--gap-sm);
}

.cache-info output {
	font-size: 0.875rem;
	color: var(--text-muted);
}

.cache-info button {
	white-space: nowrap;
}

/* --- Toast (ln-toast from ln-acme, dark theme) --- */

[data-ln-toast] {
	position: fixed;
	z-index: 9999;
	pointer-events: none;
	bottom: 1.5rem;
	left: 50%;
	transform: translateX(-50%);
	list-style: none;
	margin: 0;
	padding: 0;
}

[data-ln-toast] > .ln-toast__item {
	opacity: 0;
	transform: translateY(20px);
	transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	pointer-events: auto;
}

[data-ln-toast] > .ln-toast__item + .ln-toast__item {
	margin-top: var(--gap-sm);
}

[data-ln-toast] > .ln-toast__item--in {
	opacity: 1;
	transform: translateY(0);
}

.ln-toast__item--out {
	opacity: 0 !important;
	transform: scale(0.95) !important;
	transition: all 0.2s ease !important;
}

.ln-toast__card {
	display: flex;
	background: var(--panel-bg);
	border: 1px solid var(--border-color);
	border-radius: var(--radius);
	box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
	min-width: 280px;
	max-width: 380px;
	overflow: hidden;
}

.ln-toast__side {
	flex: 0 0 48px;
	display: flex;
	align-items: flex-start;
	justify-content: center;
	padding-top: 0.75rem;
	background: var(--accent);
}

.ln-toast__side svg {
	width: 24px;
	height: 24px;
	color: #000;
}

.ln-toast__content {
	flex: 1;
	padding: 0.75rem 0.75rem 0.75rem 0.6rem;
	position: relative;
}

.ln-toast__card--success { --ln-toast-accent: #22c55e; }
.ln-toast__card--error   { --ln-toast-accent: #ef4444; }
.ln-toast__card--warn    { --ln-toast-accent: #f59e0b; }
.ln-toast__card--info    { --ln-toast-accent: var(--accent); }

.ln-toast__card--success .ln-toast__side { background: #22c55e; }
.ln-toast__card--error .ln-toast__side   { background: #ef4444; }
.ln-toast__card--warn .ln-toast__side    { background: #f59e0b; }
.ln-toast__card--info .ln-toast__side    { background: var(--accent); }

.ln-toast__head {
	display: flex;
	align-items: flex-start;
	justify-content: space-between;
	gap: 0.5rem;
}

.ln-toast__title {
	font-weight: 700;
	font-size: 0.875rem;
	color: var(--text);
	line-height: 1.25;
}

.ln-toast__close {
	position: absolute;
	top: 0.4rem;
	right: 0.4rem;
	background: transparent;
	border: none;
	padding: 0.2rem;
	min-width: auto;
	min-height: auto;
	cursor: pointer;
	opacity: 0.5;
	transition: opacity var(--transition-fast);
}

.ln-toast__close:hover {
	opacity: 1;
	background: transparent;
}

.ln-toast__body {
	margin-top: 0.25rem;
	font-size: 0.8rem;
	color: var(--text-muted);
	line-height: 1.4;
}

.ln-toast__body p { margin: 0; }

.ln-toast__body ul {
	margin: 0.25rem 0 0 0;
	padding-left: 1rem;
	font-size: 0.75rem;
}

.ln-toast__body li + li {
	margin-top: 0.15rem;
}

/* --- Branding in topbar --- */

.brand {
	display: flex;
	align-items: center;
	gap: var(--gap-sm);
}

.brand img {
	width: 32px;
	height: 32px;
	border-radius: var(--radius-sm);
	object-fit: contain;
}

/* --- Track added flash in sidebar --- */

.track-list > li.just-added > .track-content {
	animation: flash-added 0.6s ease;
}

@keyframes flash-added {
	0%   { background: var(--accent-glow); }
	100% { background: var(--sidebar-bg); }
}

/* --- Swipe-to-Delete --- */

.track-list > li[data-ln-swiping] {
	background: var(--cue-color);
}

.track-list > li[data-ln-swiping] .track-content {
	will-change: transform;
}

.track-list > li[data-ln-swiping]::after {
	content: 'Delete';
	position: absolute;
	top: 0;
	right: 0;
	bottom: 0;
	display: flex;
	align-items: center;
	padding-right: var(--gap-lg);
	color: #fff;
	font-size: 0.75rem;
	font-weight: 700;
	text-transform: uppercase;
	letter-spacing: 0.05em;
	z-index: 0;
}

.track-list > li[data-ln-swiping]::before {
	content: '';
	position: absolute;
	right: calc(var(--gap-lg) + 3rem);
	top: 50%;
	transform: translateY(-50%);
	width: 1.25rem;
	height: 1.25rem;
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23fff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='3 6 5 6 21 6'/%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'/%3E%3C/svg%3E");
	background-size: contain;
	background-repeat: no-repeat;
	z-index: 0;
}

.track-list > li[data-ln-swipe-committed] {
	transition: max-height 0.25s ease-out, opacity 0.2s ease-out;
	max-height: 0 !important;
	opacity: 0;
	overflow: hidden;
}

/* --- Playlist Delete Button --- */

.playlist-name {
	flex: 1;
	min-width: 0;
	overflow: hidden;
	text-overflow: ellipsis;
	white-space: nowrap;
}

.playlist-delete-btn {
	flex-shrink: 0;
	width: 2rem;
	height: 2rem;
	display: flex;
	align-items: center;
	justify-content: center;
	background: transparent;
	border: none;
	opacity: 0.3;
	transition: opacity var(--transition-fast);
	touch-action: manipulation;
	margin-left: auto;
	padding: 0;
	cursor: pointer;
}

.playlist-delete-btn::before {
	width: 0.85rem;
	height: 0.85rem;
}

.playlist-group.open > header .playlist-delete-btn {
	opacity: 0.5;
}

.playlist-delete-btn:hover {
	opacity: 1 !important;
}

.playlist-delete-btn:hover::before {
	background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23ff4444' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='3 6 5 6 21 6'/%3E%3Cpath d='M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2'/%3E%3C/svg%3E");
}

/* ==========================================================================
   9. UTILITY
   ========================================================================== */

.sr-only {
	position: absolute;
	width: 1px;
	height: 1px;
	padding: 0;
	margin: -1px;
	overflow: hidden;
	clip: rect(0, 0, 0, 0);
	white-space: nowrap;
	border: 0;
}

[hidden] {
	display: none !important;
}

/* ==========================================================================
   10. RESPONSIVE
   ========================================================================== */

@media (max-width: 900px) {
	.main-area {
		grid-template-columns: 1fr;
		grid-template-rows: 1fr auto;
	}

	.sidebar {
		border-left: none;
		border-top: 1px solid var(--border-color);
		max-height: 35vh;
	}
}

@media (pointer: coarse) {
	button {
		min-height: var(--touch-min);
		min-width: var(--touch-min);
	}

	.track-content {
		padding: var(--gap-md);
	}
}
